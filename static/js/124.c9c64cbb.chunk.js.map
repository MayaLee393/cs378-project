{"version":3,"file":"static/js/124.c9c64cbb.chunk.js","mappings":"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","sources":["components/AudioPlayer.js","pages/activities/meditation.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\r\n\r\nconst CustomAudioPlayer = ({ src, title }) => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const audioRef = useRef(null);\r\n\r\n  // Toggle play/pause button\r\n  const togglePlay = () => {\r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n    } else {\r\n      audioRef.current.play();\r\n    }\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const updateTime = () => {\r\n    setCurrentTime(audioRef.current.currentTime);\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    setDuration(audioRef.current.duration);\r\n  };\r\n\r\n  // Update the progress bar\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if (audioRef.current) {\r\n        setCurrentTime(audioRef.current.currentTime);\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleSeek = (e) => {\r\n    const newTime = (e.nativeEvent.offsetX / e.target.clientWidth) * duration;\r\n    audioRef.current.currentTime = newTime;\r\n    setCurrentTime(newTime);\r\n  };\r\n\r\n  const handleTrackEnd = () => {\r\n    audioRef.current.currentTime = 0;\r\n    audioRef.current.play();\r\n  };\r\n\r\n  // reset the play/pause button when the song changes\r\n  useEffect(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = 0; \r\n      setIsPlaying(false); \r\n    }\r\n  }, [src]);\r\n\r\n  return (\r\n    <div className=\"audio-player\">\r\n      <h3>{title}</h3>\r\n\r\n      <div className=\"audio-controls\">\r\n        <button onClick={togglePlay} className=\"play-button\">\r\n        {isPlaying ? <span dangerouslySetInnerHTML={{ __html: \"&#x23F8;\" }} /> : <span dangerouslySetInnerHTML={{ __html: \"&#x25B6;\" }} />}\r\n        </button>\r\n\r\n        <div className=\"progress-bar\" onClick={handleSeek}>\r\n          <div\r\n            className=\"progress\"\r\n            style={{ width: `${(currentTime / duration) * 100}%` }}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"timestamps\">\r\n          <span>{formatTime(currentTime)}</span> / <span>{formatTime(duration)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <audio\r\n        ref={audioRef}\r\n        src={src}\r\n        onTimeUpdate={updateTime}\r\n        onLoadedMetadata={handleLoadedMetadata}\r\n        onEnded={handleTrackEnd} // Handle track ending\r\n        loop={false} // Disable default loop to handle looping manually\r\n      >\r\n        Your browser does not support the audio element.\r\n      </audio>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Format time in mm:ss\r\nconst formatTime = (time) => {\r\n  const minutes = Math.floor(time / 60);\r\n  const seconds = Math.floor(time % 60);\r\n  return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\r\n};\r\n\r\nexport default CustomAudioPlayer;\r\n","import React, { useEffect, useState } from 'react';\r\nimport CustomAudioPlayer from '../../components/AudioPlayer';\r\n\r\nconst Meditation = () => {\r\n  const [playlist, setPlaylist] = useState([]);\r\n  const [currentTrack, setCurrentTrack] = useState(null); // For current track display\r\n\r\n  useEffect(() => {\r\n    async function fetchSuggestions() {\r\n      try {\r\n        const response = await fetch('/cs378-project/suggestions.json');\r\n        const data = await response.json();\r\n\r\n        // Search all emotions for the meditation activity\r\n        for (const emotion of Object.values(data)) {\r\n          const meditation = emotion.suggestions.find(s => s.activity === 'meditation');\r\n          if (meditation && meditation.playlist) {\r\n            setPlaylist(meditation.playlist);\r\n            setCurrentTrack(meditation.playlist[0]); // Start with first track\r\n            break;\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load playlist:', err);\r\n      }\r\n    }\r\n\r\n    fetchSuggestions();\r\n  }, []);\r\n\r\n  const handleTrackChange = (track) => {\r\n    setCurrentTrack(track);\r\n  };\r\n\r\n  return (\r\n    <div className=''>\r\n      <h1>Meditation</h1>\r\n      <p>Pick a sound to meditate to:</p>\r\n\r\n      {currentTrack && (\r\n        <div className=\"activity-display-box\">\r\n        <CustomAudioPlayer \r\n          src={`/cs378-project/${currentTrack.source}`} \r\n          title={currentTrack.title}\r\n        />\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '10px', width: '85vw', margin: '0 auto'}}>\r\n        {playlist.map((track, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => handleTrackChange(track)}\r\n            className=\"playlist-button\">\r\n            {track.title}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Meditation;\r\n"],"names":["formatTime","time","minutes","Math","floor","seconds","_ref","src","title","isPlaying","setIsPlaying","useState","currentTime","setCurrentTime","duration","setDuration","audioRef","useRef","useEffect","interval","setInterval","current","clearInterval","_jsxs","className","children","_jsx","onClick","togglePlay","pause","play","dangerouslySetInnerHTML","__html","e","newTime","nativeEvent","offsetX","target","clientWidth","style","width","ref","onTimeUpdate","updateTime","onLoadedMetadata","handleLoadedMetadata","onEnded","handleTrackEnd","loop","Meditation","playlist","setPlaylist","currentTrack","setCurrentTrack","async","response","fetch","data","json","emotion","Object","values","meditation","suggestions","find","s","activity","err","console","error","fetchSuggestions","CustomAudioPlayer","source","display","gridTemplateColumns","gap","margin","map","track","index","handleTrackChange"],"sourceRoot":""}