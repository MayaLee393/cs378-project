{"version":3,"file":"static/js/22.6bce8240.chunk.js","mappings":"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","sources":["pages/activities/music.js","../node_modules/lucide-react/src/icons/pause.ts","../node_modules/lucide-react/src/icons/play.ts","components/AudioPlayer.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport CustomAudioPlayer from '../../components/AudioPlayer';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport CompleteButton from '../../components/CompleteButton';\r\n\r\nconst BackButton = () => {\r\n  const navigate = useNavigate();\r\n  return (\r\n    <div style={{ padding: \"12px 12px\" }}>\r\n      <button className=\"back-button\" variant=\"primary\" onClick={() => navigate(\"/suggestions\")}>\r\n        Back to Suggestions\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Music = () => {\r\n  const [playlist, setPlaylist] = useState([]);\r\n  const [currentTrack, setCurrentTrack] = useState(null); // For current track display\r\n\r\n  useEffect(() => {\r\n    async function fetchSuggestions() {\r\n      try {\r\n        const response = await fetch('/cs378-project/suggestions.json');\r\n        const data = await response.json();\r\n\r\n        // Search all emotions for the meditation activity\r\n        for (const emotion of Object.values(data)) {\r\n          const music = emotion.suggestions.find(s => s.activity === 'listen to calming music');\r\n          if (music && music.playlist) {\r\n            setPlaylist(music.playlist);\r\n            setCurrentTrack(music.playlist[0]); // Start with first track\r\n            break;\r\n          }\r\n        }\r\n      } catch (err) {\r\n        console.error('Failed to load playlist:', err);\r\n      }\r\n    }\r\n\r\n    fetchSuggestions();\r\n  }, []);\r\n\r\n  const handleTrackChange = (track) => {\r\n    setCurrentTrack(track);\r\n  };\r\n\r\n  return (\r\n    <div className=''>\r\n      <h1>Calming Music</h1>\r\n      <p>Pick a sound to listen to:</p>\r\n\r\n      {currentTrack && (\r\n        <div className=\"activity-display-box\">\r\n          <CustomAudioPlayer\r\n            src={`/cs378-project/${currentTrack.source}`}\r\n            title={currentTrack.title}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(2, 1fr)', gap: '10px', width: '85vw', margin: '0 auto' }}>\r\n        {playlist.map((track, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => handleTrackChange(track)}\r\n            className=\"playlist-button\">\r\n            {track.title}\r\n          </button>\r\n        ))}\r\n      </div>\r\n      {/* <CompleteButton/> */}\r\n      <BackButton />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Music;\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { x: '14', y: '4', width: '4', height: '16', rx: '1', key: 'zuxfzm' }],\n  ['rect', { x: '6', y: '4', width: '4', height: '16', rx: '1', key: '1okwgv' }],\n];\n\n/**\n * @component @name Pause\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB4PSIxNCIgeT0iNCIgd2lkdGg9IjQiIGhlaWdodD0iMTYiIHJ4PSIxIiAvPgogIDxyZWN0IHg9IjYiIHk9IjQiIHdpZHRoPSI0IiBoZWlnaHQ9IjE2IiByeD0iMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pause\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Pause = createLucideIcon('pause', __iconNode);\n\nexport default Pause;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['polygon', { points: '6 3 20 12 6 21 6 3', key: '1oa8hb' }]];\n\n/**\n * @component @name Play\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cG9seWdvbiBwb2ludHM9IjYgMyAyMCAxMiA2IDIxIDYgMyIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/play\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Play = createLucideIcon('play', __iconNode);\n\nexport default Play;\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { Play, Pause } from 'lucide-react';\r\n\r\n\r\nconst CustomAudioPlayer = ({ src, title }) => {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [duration, setDuration] = useState(0);\r\n  const audioRef = useRef(null);\r\n\r\n  // Toggle play/pause button\r\n  const togglePlay = () => {\r\n    if (isPlaying) {\r\n      audioRef.current.pause();\r\n    } else {\r\n      audioRef.current.play();\r\n    }\r\n    setIsPlaying(!isPlaying);\r\n  };\r\n\r\n  const updateTime = () => {\r\n    setCurrentTime(audioRef.current.currentTime);\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    setDuration(audioRef.current.duration);\r\n  };\r\n\r\n  // Update the progress bar\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      if (audioRef.current) {\r\n        setCurrentTime(audioRef.current.currentTime);\r\n      }\r\n    }, 1000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  const handleSeek = (e) => {\r\n    const newTime = (e.nativeEvent.offsetX / e.target.clientWidth) * duration;\r\n    audioRef.current.currentTime = newTime;\r\n    setCurrentTime(newTime);\r\n  };\r\n\r\n  const handleTrackEnd = () => {\r\n    audioRef.current.currentTime = 0;\r\n    audioRef.current.play();\r\n  };\r\n\r\n  // reset the play/pause button when the song changes\r\n  useEffect(() => {\r\n    if (audioRef.current) {\r\n      audioRef.current.currentTime = 0; \r\n      setIsPlaying(false); \r\n    }\r\n  }, [src]);\r\n\r\n  return (\r\n    <div className=\"audio-player\">\r\n      <h3>{title}</h3>\r\n\r\n      <div className=\"audio-controls\">\r\n        <button onClick={togglePlay} className=\"play-button\">\r\n        {isPlaying ? <Pause size={24} /> : <Play size={24} />}\r\n        </button>\r\n\r\n        <div className=\"progress-bar\" onClick={handleSeek}>\r\n          <div\r\n            className=\"progress\"\r\n            style={{ width: `${(currentTime / duration) * 100}%` }}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"timestamps\">\r\n          <span>{formatTime(currentTime)}</span> / <span>{formatTime(duration)}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <audio\r\n        ref={audioRef}\r\n        src={src}\r\n        onTimeUpdate={updateTime}\r\n        onLoadedMetadata={handleLoadedMetadata}\r\n        onEnded={handleTrackEnd} // Handle track ending\r\n        loop={false} // Disable default loop to handle looping manually\r\n      >\r\n        Your browser does not support the audio element.\r\n      </audio>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Format time in mm:ss\r\nconst formatTime = (time) => {\r\n  const minutes = Math.floor(time / 60);\r\n  const seconds = Math.floor(time % 60);\r\n  return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;\r\n};\r\n\r\nexport default CustomAudioPlayer;\r\n"],"names":["BackButton","navigate","useNavigate","_jsx","style","padding","children","className","variant","onClick","Music","playlist","setPlaylist","useState","currentTrack","setCurrentTrack","useEffect","async","response","fetch","data","json","emotion","Object","values","music","suggestions","find","s","activity","err","console","error","fetchSuggestions","_jsxs","CustomAudioPlayer","src","source","title","display","gridTemplateColumns","gap","width","margin","map","track","index","handleTrackChange","Pause","createLucideIcon","x","y","height","rx","key","Play","points","formatTime","time","minutes","Math","floor","seconds","_ref","isPlaying","setIsPlaying","currentTime","setCurrentTime","duration","setDuration","audioRef","useRef","interval","setInterval","current","clearInterval","togglePlay","pause","play","size","e","newTime","nativeEvent","offsetX","target","clientWidth","ref","onTimeUpdate","updateTime","onLoadedMetadata","handleLoadedMetadata","onEnded","handleTrackEnd","loop"],"sourceRoot":""}